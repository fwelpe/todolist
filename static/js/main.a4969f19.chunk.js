(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{139:function(e,t,a){},147:function(e,t,a){},161:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),l=a(57),i=a.n(l),u=a(73),m=a(8),s=a(79),d=a(15),p=a(16),f=a(23),b=(a(95),a(74)),h=a(195),E=a(185),g=a(186),O=a(187),j=a(194),v=a(183),y=a(188),w=a(189),k=a(190),D=a(191),S=a(192),C=a(184),N=a(75),T=a.n(N),x=a(76),P=a.n(x),M=a(78),Y=["Work","Hardwork","Learning","Chill"],I=a(77),z=a.n(I),A=(a(139),function(e){var t=e.item.completed?"completed":"",a=e.item.completed?"completed":Date.parse(new Date(e.item.date))-Date.parse(new Date)<1728e5?"text-danger":"",c=e.item.important&&!e.item.completed?"importantIcon text-danger rightInFlex":"invisible rightInFlex",o=(new Date).getFullYear(),l=new Date(e.item.date).getFullYear(),i=o===l?"MMMM D":"MMMM D, YYYY",u=r.a.createElement(z.a,{format:i},e.item.date),f=Object(n.useState)(!1),b=Object(m.a)(f,2),h=b[0],E=b[1],g=function(){return E(!h)};return r.a.createElement("div",{className:"todo-item"},r.a.createElement("input",{type:"checkbox",checked:e.item.completed,onChange:function(){return e.changeDone(e.id)}}),r.a.createElement("div",{className:"mx-lg-3"},r.a.createElement("p",{className:t},e.item.todo," [",e.item.type,"]"),r.a.createElement("p",{className:t},r.a.createElement("small",null,e.item.desc)),r.a.createElement("p",{className:a},"Deadline: ",u)),r.a.createElement(d.a,{icon:p.d,className:c}),r.a.createElement(M.a,null,r.a.createElement(s.a,{onClick:g},r.a.createElement(d.a,{icon:p.g})),r.a.createElement(s.a,{onClick:function(){return e.changeTodo(e.item,e.id)}},r.a.createElement(d.a,{icon:p.f}))),r.a.createElement(j.a,{isOpen:h,toggle:g},r.a.createElement(v.a,{toggle:g},"Are you sure?"),r.a.createElement(C.a,null,r.a.createElement(s.a,{color:"primary",onClick:function(){e.delTodo(e.id),g()}},"Yes"),r.a.createElement(s.a,{color:"secondary",onClick:g},"No"))))});a(147);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(e){var t=e.token,a=e.todoObj,c=e.setTodoObjHook;console.log("Todo");var o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(""),p=Object(m.a)(d,2),b=p[0],N=p[1],x=Object(n.useState)(new Date),I=Object(m.a)(x,2),z=I[0],B=I[1],L=Y.map((function(e,t){return{label:e,key:t}})),q=Object(n.useState)(!1),F=Object(m.a)(q,2),J=F[0],U=F[1],V=Object(n.useState)(!1),W=Object(m.a)(V,2),R=W[0],$=W[1],G=Object(n.useState)(!1),K=Object(m.a)(G,2),Q=K[0],X=K[1],Z=Object(f.g)(),_=Object(f.h)(),ee=Object(n.useState)(),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=function(e){fetch("http://localhost:3001/write",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}),c(e)},ce=function(e){var t=H({},a);t[e].completed=!t[e].completed,re(t)},oe=function(e){var t=H({},a);delete t[e],re(t)},le=function(e,t){X(!0),u(e.todo),N(e.desc),pe(e.type),B(new Date(e.date)),U(t),$(!!e.important)},ie=function(){u(""),N(""),pe(Y[0]),B(new Date),U(!1),$(!1)},ue=function(){ie(),X(!Q)},me=Object(n.useState)(Y[0]),se=Object(m.a)(me,2),de=se[0],pe=se[1],fe=Object(n.useState)(!1),be=Object(m.a)(fe,2),he=be[0],Ee=be[1];return _.params.sort&&_.params.sort!==ae&&(!function(e){var t,n=Object.keys(a).map((function(e){return a[e]}));if(e&&e!==ae){if("time"===e)t=function(e,t){return new Date(e.date)-new Date(t.date)};else{if("type"!==e)return;t=function(e,t){var a=e.type.toLowerCase(),n=t.type.toLowerCase();return a.localeCompare(n)}}n.sort(t);var r=n.reduce((function(e,t,a){return e[a]=t,e}),{});0===Object.keys(r).length&&r.constructor===Object||re(r)}}(_.params.sort),ne(_.params.sort)),r.a.createElement("div",{className:"todo-list"},r.a.createElement(M.a,null,r.a.createElement(s.a,{color:"primary",onClick:ue},"New Todo"),r.a.createElement(h.a,{isOpen:he,toggle:function(){return Ee(!he)}},r.a.createElement(E.a,{caret:!0},"Sort list"),r.a.createElement(g.a,null,r.a.createElement(O.a,{onClick:function(){return Z.push("/home/list/time")}},"By time"),r.a.createElement(O.a,{onClick:function(){return Z.push("/home/list/type")}},"By type")))),r.a.createElement(j.a,{isOpen:Q,toggle:ue},r.a.createElement(v.a,{toggle:ue},"New Todo"),r.a.createElement(y.a,null,r.a.createElement(w.a,{id:"add",onSubmit:function(e){e.preventDefault(),function(e){var t=H({},a),n=J||Object.keys(t).reduce((function(e,t){var a=Number(t);return a>=e?a+1:e}),0);t[n]=e,re(t),ie()}({todo:i,completed:!1,type:de,date:z,desc:b,important:R}),ue()}},r.a.createElement(k.a,null,r.a.createElement(D.a,null,"Name"),r.a.createElement(S.a,{type:"text",value:i,onChange:function(e){return u(e.target.value)},required:!0})),r.a.createElement(k.a,null,r.a.createElement(D.a,null,"Description (optional)"),r.a.createElement(S.a,{type:"text",value:b,onChange:function(e){return N(e.target.value)}})),r.a.createElement(k.a,null,r.a.createElement(D.a,{for:"exampleSelect"},"Type"),r.a.createElement(P.a,{required:!0,initialValue:de,items:L,onSelect:function(e){return pe(e.label)},match:function(e,t){return pe(e),t.label.substr(0,e.length).toUpperCase()===e.toUpperCase()}})),r.a.createElement(k.a,null,r.a.createElement(D.a,null,"Deadline"),r.a.createElement(T.a,{required:!0,onChange:B,value:z})),r.a.createElement(k.a,{check:!0},r.a.createElement(D.a,{check:!0},r.a.createElement(S.a,{type:"checkbox",checked:R,onChange:function(){return $(!R)}}),"Important")))),r.a.createElement(C.a,null,r.a.createElement(s.a,{color:"primary",form:"add",type:"submit"},"Submit"),r.a.createElement(s.a,{color:"secondary",onClick:ue},"Cancel"))),Object.keys(a).map((function(e){return r.a.createElement(A,{key:e,id:e,item:a[e],changeDone:ce,delTodo:oe,changeTodo:le})})))},q=a(81),F=a.n(q),J=a(61),U=(a(161),function(e){var t=e.TodoObj;console.log("Calendar");var a=Object(f.h)(),n=Object(f.g)(),c=Object.keys(t).map((function(e){return t[e]})),o=function(e){return c.filter((function(t){return function(e,t){var a=new Date(e),n=a.getYear(),r=a.getMonth(),c=a.getDate(),o=new Date(t),l=o.getYear(),i=o.getMonth(),u=o.getDate();return n===l&&r===i&&c===u}(e,t.date)}))},l=r.a.createElement(d.a,{size:"lg",icon:p.d}),i=r.a.createElement(d.a,{size:"lg",icon:p.c}),u=r.a.createElement(d.a,{size:"lg",icon:p.a});return r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:a.path},r.a.createElement(F.a,{tileContent:function(e){var t=e.date;if("month"===e.view){var a=t.getMonth(),n=t.getDate(),o=t.getYear(),l=[];c.forEach((function(e){var t=e.date,r=e.todo,c=new Date(t);c.getDate()===n&&c.getMonth()===a&&c.getYear()===o&&l.push(r)}));var i=l.join("; "),u=i.length>19?i.substr(0,16)+"...":i;return r.a.createElement("p",null,u)}},className:"calendar",onClickDay:function(e){o(e).length&&n.push("/home/calendar/".concat(e))}})),r.a.createElement(f.b,{path:"".concat(a.path,"/:day"),render:function(e){return function(e){var t=o(e.match.params.day),a={background:"rgb(33, 150, 243)",color:"#fff"},n=t.sort((function(e,t){var a=e.date,n=t.date;return new Date(a)-new Date(n)})).map((function(e,t){var n=e.completed?"done":"",c=e.completed?i:e.important?l:u,o=new Intl.NumberFormat("ru-RU",{minimumIntegerDigits:2}).format,m=new Date(e.date),s=o(m.getHours())+":"+o(m.getMinutes());return r.a.createElement(J.VerticalTimelineElement,{key:t,iconStyle:a,icon:c,date:s},r.a.createElement("h4",{className:n},e.todo," [",e.type,"]"),r.a.createElement("p",{className:n},e.desc))}));return r.a.createElement(J.VerticalTimeline,null,n)}(e)}}))}),V=function(e){var t=e.token,a=e.todoObj,n=e.setTodoObjHook;console.log("AppAuthorized");var c=Object(f.g)(),o=Object(f.h)();return r.a.createElement("div",null,r.a.createElement("div",{className:"mainBtns"},r.a.createElement(s.a,{onClick:function(){return c.push("".concat(o.path,"/list"))}},r.a.createElement(d.a,{icon:p.e})),r.a.createElement(s.a,{onClick:function(){return c.push("".concat(o.path,"/calendar"))}},r.a.createElement(d.a,{icon:p.b}))),r.a.createElement(f.b,{exact:!0,path:o.path},r.a.createElement(f.a,{to:"".concat(o.path,"/list")})),r.a.createElement(f.b,{exact:!0,path:"".concat(o.path,"/list")},r.a.createElement(L,{token:t,todoObj:a,setTodoObjHook:n})),r.a.createElement(f.b,{path:"".concat(o.path,"/list/:sort")},r.a.createElement(L,{token:t,todoObj:a,setTodoObjHook:n})),r.a.createElement(f.b,{path:"".concat(o.path,"/calendar")},r.a.createElement(U,{token:t,TodoObj:a})))},W=a(82),R=a.n(W),$="http://api.openweathermap.org/data/2.5/weather?id=524901&APPID=".concat("3eb3f8b5e93b49c844e8317fe0e4e210","&units=metric"),G=["http://openweathermap.org/img/wn/","@2x.png"],K=(a(170),function(e){var t=e.isAuthorized,a=Object(n.useState)(""),c=Object(m.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1];return Object(n.useEffect)((function(){fetch($).then((function(e){return e.json()})).then((function(e){var t=e.main.temp+" \xb0C";l(t),d(G[0]+e.weather[0].icon+G[1])}))}),[]),r.a.createElement("div",{className:"header navbar"},r.a.createElement("div",{id:"title"},"TodoList"),t?r.a.createElement("div",{id:"weather"},r.a.createElement("div",{className:"temp"},o),r.a.createElement(R.a,{className:"icon",src:s})):null)}),Q=a(33),X=a(193);a(171),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(172);o.a.render(r.a.createElement((function(){var e=Object(n.useState)(localStorage.getItem("token")),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(m.a)(o,2),d=l[0],p=l[1];console.log("App; authorizedStatus = ",d);var b=Object(n.useState)(""),h=Object(m.a)(b,2),E=h[0],g=h[1],O=Object(n.useState)(""),j=Object(m.a)(O,2),v=j[0],y=j[1],C=Object(n.useState)(!1),N=Object(m.a)(C,2),T=N[0],x=N[1],P=Object(n.useState)("secondary"),M=Object(m.a)(P,2),Y=M[0],I=M[1],z=Object(n.useState)({}),A=Object(m.a)(z,2),B=A[0],H=A[1],L=Object(n.useState)(!1),q=Object(m.a)(L,2),F=q[0],J=q[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,fetch("http://localhost:3001",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return p(e.status),200===e.status?e.json():(U(""),{})})).then((function(e){H(e),J(!0)})).catch((function(e){console.log("err in main data read fetch",e),J(!0)}));case 3:e.next=6;break;case 5:J(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var U=function(e){localStorage.setItem("token",e),c(e)},W=200===d&&!!a;return F?r.a.createElement(Q.a,null,r.a.createElement(K,{isAuthorized:W}),r.a.createElement(f.b,{exact:!0,path:"/"},W?r.a.createElement(f.a,{to:"/home"}):r.a.createElement("div",{id:"login",className:"form-signin"},r.a.createElement(w.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3001/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:E,password:v})}).then((function(e){if(console.log("Login setting status",e.status),p(e.status),200===e.status)return e.text();x(!0),I("danger"),setTimeout((function(){x(!1),I("secondary")}),2e3),U("")})).then((function(e){e&&U(e)})).catch((function(e){p(e),console.error(e)}))}},r.a.createElement(k.a,null,r.a.createElement(D.a,{for:"login"},"Login"),r.a.createElement(S.a,{invalid:T,type:"text",id:"login",placeholder:"Login",value:E,onChange:function(e){return g(e.target.value)},required:!0})),r.a.createElement(k.a,null,r.a.createElement(D.a,{for:"psw"},"Password"),r.a.createElement(S.a,{invalid:T,type:"password",id:"psw",placeholder:"Password",value:v,onChange:function(e){return y(e.target.value)},required:!0})),r.a.createElement(s.a,{color:Y,className:"btn btn-lg btn-primary btn-block"},"Submit")))),r.a.createElement(f.b,{path:"/home"},W?r.a.createElement(V,{token:a,todoObj:B,setTodoObjHook:H}):r.a.createElement(f.a,{to:"/"}))):r.a.createElement("div",{id:"loader"},r.a.createElement(X.a,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,a){e.exports=a(173)},95:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.a4969f19.chunk.js.map