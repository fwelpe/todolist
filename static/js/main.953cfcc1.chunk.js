(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{134:function(e,t,a){},142:function(e,t,a){},156:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),l=a(8),i=a(75),u=a(15),m=a(16),s=a(22),p=(a(90),a(70)),d=a(180),f=a(171),h=a(172),b=a(173),E=a(179),g=a(169),O=a(174),j=a(175),v=a(176),y=a(177),w=a(178),k=a(170),D=a(71),S=a.n(D),C=a(72),N=a.n(C),x=a(74),T="http://localhost:3001",z=["Work","Hardwork","Learning","Chill"],A=a(73),P=a.n(A),M=(a(134),function(e){var t=e.item.completed?"completed":"",a=e.item.completed?"completed":Date.parse(new Date(e.item.date))-Date.parse(new Date)<1728e5?"text-danger":"",c=e.item.important&&!e.item.completed?"importantIcon text-danger rightInFlex":"invisible rightInFlex",o=(new Date).getFullYear(),s=new Date(e.item.date).getFullYear(),p=o===s?"MMMM D":"MMMM D, YYYY",d=r.a.createElement(P.a,{format:p},e.item.date),f=Object(n.useState)(!1),h=Object(l.a)(f,2),b=h[0],O=h[1],j=function(){return O(!b)};return r.a.createElement("div",{className:"todo-item"},r.a.createElement("input",{type:"checkbox",checked:e.item.completed,onChange:function(){return e.changeDone(e.id)}}),r.a.createElement("div",{className:"mx-lg-3"},r.a.createElement("p",{className:t},e.item.todo," [",e.item.type,"]"),r.a.createElement("p",{className:t},r.a.createElement("small",null,e.item.desc)),r.a.createElement("p",{className:a},"Deadline: ",d)),r.a.createElement(u.a,{icon:m.d,className:c}),r.a.createElement(x.a,null,r.a.createElement(i.a,{onClick:j},r.a.createElement(u.a,{icon:m.g})),r.a.createElement(i.a,{onClick:function(){return e.changeTodo(e.item,e.id)}},r.a.createElement(u.a,{icon:m.f}))),r.a.createElement(E.a,{isOpen:b,toggle:j},r.a.createElement(g.a,{toggle:j},"Are you sure?"),r.a.createElement(k.a,null,r.a.createElement(i.a,{color:"primary",onClick:function(){e.delTodo(e.id),j()}},"Yes"),r.a.createElement(i.a,{color:"secondary",onClick:j},"No"))))});a(142);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(e){var t=e.token,a=e.setAuthorized,c=Object(n.useState)(""),o=Object(l.a)(c,2),u=o[0],m=o[1],p=Object(n.useState)(""),D=Object(l.a)(p,2),C=D[0],A=D[1],P=Object(n.useState)(new Date),Y=Object(l.a)(P,2),B=Y[0],L=Y[1],q=z.map((function(e,t){return{label:e,key:t}})),F=Object(n.useState)(!1),J=Object(l.a)(F,2),U=J[0],V=J[1],W=Object(n.useState)(!1),H=Object(l.a)(W,2),R=H[0],$=H[1],G=Object(n.useState)(!1),K=Object(l.a)(G,2),Q=K[0],X=K[1],Z=Object(n.useState)({}),_=Object(l.a)(Z,2),ee=_[0],te=_[1],ae=Object(s.g)(),ne=Object(s.h)(),re=Object(n.useState)(),ce=Object(l.a)(re,2),oe=ce[0],le=ce[1];Object(n.useEffect)((function(){var e=new AbortController,n=e.signal;return fetch(T,{headers:{Authorization:"Bearer ".concat(t)},signal:n}).then((function(e){if(a(e.status),200===e.status)return e.json()})).then((function(e){te(e)})).catch((function(e){a(e)})),function(){e.abort()}}),[a,t]);var ie=function(e){fetch("http://localhost:3001/write",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return a(e.status)})),te(e)},ue=function(e){var t=I({},ee);t[e].completed=!t[e].completed,ie(t)},me=function(e){var t=I({},ee);delete t[e],ie(t)},se=function(e,t){X(!0),m(e.todo),A(e.desc),Ee(e.type),L(new Date(e.date)),V(t),$(!!e.important)},pe=function(){m(""),A(""),Ee(z[0]),L(new Date),V(!1),$(!1)},de=function(){pe(),X(!Q)},fe=Object(n.useState)(z[0]),he=Object(l.a)(fe,2),be=he[0],Ee=he[1],ge=Object(n.useState)(!1),Oe=Object(l.a)(ge,2),je=Oe[0],ve=Oe[1];return ne.params.sort&&ne.params.sort!==oe&&(!function(e){var t,a=Object.keys(ee).map((function(e){return ee[e]}));if(e&&e!==oe){if("time"===e)t=function(e,t){return new Date(e.date)-new Date(t.date)};else{if("type"!==e)return;t=function(e,t){var a=e.type.toLowerCase(),n=t.type.toLowerCase();return a.localeCompare(n)}}a.sort(t);var n=a.reduce((function(e,t,a){return e[a]=t,e}),{});0===Object.keys(n).length&&n.constructor===Object||ie(n)}}(ne.params.sort),le(ne.params.sort)),r.a.createElement("div",{className:"todo-list"},r.a.createElement(x.a,null,r.a.createElement(i.a,{color:"primary",onClick:de},"New Todo"),r.a.createElement(d.a,{isOpen:je,toggle:function(){return ve(!je)}},r.a.createElement(f.a,{caret:!0},"Sort list"),r.a.createElement(h.a,null,r.a.createElement(b.a,{onClick:function(){return ae.push("/home/list/time")}},"By time"),r.a.createElement(b.a,{onClick:function(){return ae.push("/home/list/type")}},"By type")))),r.a.createElement(E.a,{isOpen:Q,toggle:de},r.a.createElement(g.a,{toggle:de},"New Todo"),r.a.createElement(O.a,null,r.a.createElement(j.a,{id:"add",onSubmit:function(e){e.preventDefault(),function(e){var t=I({},ee),a=U||Object.keys(t).reduce((function(e,t){var a=Number(t);return a>=e?a+1:e}),0);t[a]=e,ie(t),pe()}({todo:u,completed:!1,type:be,date:B,desc:C,important:R}),de()}},r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Name"),r.a.createElement(w.a,{type:"text",value:u,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Description (optional)"),r.a.createElement(w.a,{type:"text",value:C,onChange:function(e){return A(e.target.value)}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{for:"exampleSelect"},"Type"),r.a.createElement(N.a,{required:!0,initialValue:be,items:q,onSelect:function(e){return Ee(e.label)},match:function(e,t){return Ee(e),t.label.substr(0,e.length).toUpperCase()===e.toUpperCase()}})),r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Deadline"),r.a.createElement(S.a,{required:!0,onChange:L,value:B})),r.a.createElement(v.a,{check:!0},r.a.createElement(y.a,{check:!0},r.a.createElement(w.a,{type:"checkbox",checked:R,onChange:function(){return $(!R)}}),"Important")))),r.a.createElement(k.a,null,r.a.createElement(i.a,{color:"primary",form:"add",type:"submit"},"Submit"),r.a.createElement(i.a,{color:"secondary",onClick:de},"Cancel"))),Object.keys(ee).map((function(e){return r.a.createElement(M,{key:e,id:e,item:ee[e],changeDone:ue,delTodo:me,changeTodo:se})})))},L=a(78),q=a.n(L),F=a(58),J=(a(156),function(e){var t=Object(n.useState)({}),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(s.h)(),p=Object(s.g)();Object(n.useEffect)((function(){fetch(T,{headers:{Authorization:"Bearer ".concat(e.token),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){return console.error(e)}))}),[e.token]);var d=Object.keys(c).map((function(e){return c[e]})),f=function(e){return d.filter((function(t){return function(e,t){var a=new Date(e),n=a.getYear(),r=a.getMonth(),c=a.getDate(),o=new Date(t),l=o.getYear(),i=o.getMonth(),u=o.getDate();return n===l&&r===i&&c===u}(e,t.date)}))},h=r.a.createElement(u.a,{size:"lg",icon:m.d}),b=r.a.createElement(u.a,{size:"lg",icon:m.c}),E=r.a.createElement(u.a,{size:"lg",icon:m.a});return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:i.path},r.a.createElement(q.a,{tileContent:function(e){var t=e.date;if("month"===e.view){var a=t.getMonth(),n=t.getDate(),c=t.getYear(),o=[];d.forEach((function(e){var t=e.date,r=e.todo,l=new Date(t);l.getDate()===n&&l.getMonth()===a&&l.getYear()===c&&o.push(r)}));var l=o.join("; "),i=l.length>19?l.substr(0,16)+"...":l;return r.a.createElement("p",null,i)}},className:"calendar",onClickDay:function(e){f(e).length&&p.push("/home/calendar/".concat(e))}})),r.a.createElement(s.b,{path:"".concat(i.path,"/:day"),render:function(e){return function(e){var t=f(e.match.params.day),a={background:"rgb(33, 150, 243)",color:"#fff"},n=t.sort((function(e,t){var a=e.date,n=t.date;return new Date(a)-new Date(n)})).map((function(e,t){var n=e.completed?"done":"",c=e.completed?b:e.important?h:E,o=new Intl.NumberFormat("ru-RU",{minimumIntegerDigits:2}).format,l=new Date(e.date),i=o(l.getHours())+":"+o(l.getMinutes());return r.a.createElement(F.VerticalTimelineElement,{key:t,iconStyle:a,icon:c,date:i},r.a.createElement("h4",{className:n},e.todo," [",e.type,"]"),r.a.createElement("p",{className:n},e.desc))}));return r.a.createElement(F.VerticalTimeline,null,n)}(e)}}))}),U=function(e){var t=Object(s.g)(),a=Object(s.h)();return Object(n.useEffect)((function(){e.isAuthorized||t.push("/login")})),r.a.createElement("div",null,r.a.createElement("div",{className:"mainBtns"},r.a.createElement(i.a,{onClick:function(){return t.push("".concat(a.path,"/list"))}},r.a.createElement(u.a,{icon:m.e})),r.a.createElement(i.a,{onClick:function(){return t.push("".concat(a.path,"/calendar"))}},r.a.createElement(u.a,{icon:m.b}))),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:a.path},r.a.createElement(s.a,{to:"".concat(a.path,"/list")})),r.a.createElement(s.b,{exact:!0,path:"".concat(a.path,"/list")},r.a.createElement(B,e)),r.a.createElement(s.b,{path:"".concat(a.path,"/list/:sort")},r.a.createElement(B,e)),r.a.createElement(s.b,{path:"".concat(a.path,"/calendar")},r.a.createElement(J,e))))},V=a(79),W=a.n(V),H="http://api.openweathermap.org/data/2.5/weather?id=524901&APPID=".concat("3eb3f8b5e93b49c844e8317fe0e4e210","&units=metric"),R=["http://openweathermap.org/img/wn/","@2x.png"],$=(a(165),function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){fetch(H).then((function(e){return e.json()})).then((function(e){var t=e.main.temp+" \xb0C";c(t),m(R[0]+e.weather[0].icon+R[1])}))}),[]),r.a.createElement("div",{className:"header navbar"},r.a.createElement("div",{id:"title"},"TodoList"),r.a.createElement("div",{id:"weather"},r.a.createElement("div",{className:"temp"},a),r.a.createElement(W.a,{className:"icon",src:u})))}),G=(a(166),function(e){var t=Object(s.g)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],u=c[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)(!1),b=Object(l.a)(h,2),E=b[0],g=b[1],O=Object(n.useState)("secondary"),k=Object(l.a)(O,2),D=k[0],S=k[1];Object(n.useEffect)((function(){e.isAuthorized&&t.push("/home")}),[t,e.isAuthorized]);return r.a.createElement("div",{id:"login",className:"form-signin"},r.a.createElement(j.a,{onSubmit:function(a){a.preventDefault(),fetch("http://localhost:3001/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:o,password:d})}).then((function(t){if(e.setAuthorized(t.status),200===t.status)return t.text();g(!0),S("danger"),setTimeout((function(){g(!1),S("secondary")}),2e3),e.setToken("")})).then((function(a){a&&(e.setToken(a),t.push("/home"))})).catch((function(e){console.error(e)}))}},r.a.createElement(v.a,null,r.a.createElement(y.a,{for:"login"},"Login"),r.a.createElement(w.a,{invalid:E,type:"text",id:"login",placeholder:"Login",value:o,onChange:function(e){return u(e.target.value)},required:!0})),r.a.createElement(v.a,null,r.a.createElement(y.a,{for:"psw"},"Password"),r.a.createElement(w.a,{invalid:E,type:"password",id:"psw",placeholder:"Password",value:d,onChange:function(e){return f(e.target.value)},required:!0})),r.a.createElement(i.a,{color:D,className:"btn btn-lg btn-primary btn-block"},"Submit")))}),K=a(27);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(167);o.a.render(r.a.createElement((function(){var e=Object(n.useState)(localStorage.getItem("token")),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),i=Object(l.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){a&&fetch(T,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){m(e.status),200!==e.status&&p("")}))}),[a]);var p=function(e){localStorage.setItem("token",e),c(e)};return r.a.createElement(K.a,null,r.a.createElement($,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(s.a,{to:"/login"})),r.a.createElement(s.b,{path:"/login",render:function(){return r.a.createElement(G,{setToken:p,setAuthorized:m,isAuthorized:200===u&&!!a})}}),r.a.createElement(s.b,{path:"/home"},r.a.createElement(U,{token:a,setAuthorized:m,isAuthorized:200===u&&!!a})),r.a.createElement(s.b,null,r.a.createElement("h1",{className:"text-center"},"404"))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a(168)},90:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.953cfcc1.chunk.js.map